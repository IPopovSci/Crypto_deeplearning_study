{% extends "base.html" %} {% block title %}Home{% endblock %} {% block content
%}
<head>
    <script type="text/javascript">
    </script>
</head>
<body>
<h1>This is home page</h1>
{% block main %}
<h1>Intervals</h1>
<ul>

    <div class="form-group">
        <label for="all_intervals">Select an interval:</label>
        <select class="form-control" id="all_intervals" type="text" name="Interval">
            {% for interval in all_intervals %}
            <option value="{{ interval }}">{{ interval }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="all_tickers">Select list:</label>
        <select class="form-control" id="all_tickers" type="text" name="Ticker">
            {% for ticker in all_tickers %}
            <option value="{{ ticker }}">{{ ticker }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="all_model_types">Select list:</label>
        <select class="form-control" id="all_model_types" type="text" name="Ticker">
            {% for model_type in all_model_types %}
            <option value="{{ model_type }}">{{ model_type }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="all_model">Select list:</label>
        <select class="form-control" id="all_model" type="text" name="Ticker">
            {% for model in all_model %}
            <option value="{{ model }}">{{ model }}</option>
            {% endfor %}
        </select>
    </div>
          <div>
        <input class="form-check-input" type="checkbox" value="True" id="backtest" name="backtest">Select me
      </div><br><br>

    <button class="btn btn-primary" id="process_input">Predict</button>
    </form>
</ul>
<br><br>

<div id="processed_results">
    Here we display some output based on the selection
</div>
</div>
<script src="https://code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script>
<script
        src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"
></script>
<script type="text/javascript">
        console.log('goodbye world')

      $(document).ready(function() {

        $('#all_intervals').change(function(){

          $.getJSON('/_update_dropdown', {
                                      selected_ticker: $('#all_tickers').val(),
                selected_interval: $('#all_intervals').val(),
            selected_model_type: $('#all_model_types').val()


          }).success(function(data) {
                $('#all_tickers').html(data.ticker_selection);
                $('#all_model_types').html(data.model_type_selection);
                $('#all_model').html(data.model_selection);
                })

        $("option[value='Select Interval']").remove();
        });

        $('#all_tickers').change(function(){


          $.getJSON('/_update_dropdown', {
                          selected_ticker: $('#all_tickers').val(),
                selected_interval: $('#all_intervals').val(),
            selected_model_type: $('#all_model_types').val()

          }).success(function(data) { console.log('Im a maniac????')
                $('#all_model_types').html(data.model_type_selection);
                                $('#all_model').html(data.model_selection);
           })

        $("option[value='Select Ticker']").remove();
        });

        $('#all_model_types').change(function(){

          $.getJSON('/_update_dropdown', {
                          selected_ticker: $('#all_tickers').val(),
                selected_interval: $('#all_intervals').val(),
            selected_model_type: $('#all_model_types').val()

          }).success(function(data) { console.log('Im a maniac????')
                $('#all_model').html(data.model_selection);
           })
          $("option[value='Select Model Type']").remove();
        });

        $('#process_input').bind('click', function() {

            $.getJSON('/_process_data', {
                selected_interval: $('#all_intervals').val(),
                selected_ticker: $('#all_tickers').val(),
                selected_model_type: $('#all_model_types').val(),
                selected_model: $('#all_model').val(),


            }).success(function(data) {
                $('#processed_results').text(data.random_text);
            })
          return false;
            });
      });



</script>

{% endblock %}
{% endblock %}
</body>